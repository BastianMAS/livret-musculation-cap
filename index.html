<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Livret de Musculation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            min-height: 100vh;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; }
        .card { 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px);
            border-radius: 1.5rem; 
            padding: 2rem; 
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            margin-bottom: 1.5rem;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1rem;
        }
        .btn:hover { transform: scale(1.05); }
        .btn-primary { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; }
        .btn-success { background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%); color: white; }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: white; }
        .btn-danger { background: rgba(239, 68, 68, 0.2); color: #fca5a5; }
        .btn-warning { background: linear-gradient(135deg, #f97316 0%, #fb923c 100%); color: white; }
        .btn-link { background: transparent; color: #67e8f9; text-decoration: underline; padding: 0.5rem; font-size: 0.875rem; }
        .input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        .input::placeholder { color: rgba(255, 255, 255, 0.5); }
        .input:focus { outline: none; border-color: #06b6d4; }
        select.input { 
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1rem;
            padding-right: 2.5rem;
        }
        .text-white { color: white; }
        .text-cyan { color: #67e8f9; }
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 2rem; }
        .mt-2 { margin-top: 1rem; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 1rem; }
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        .grid-cols-5 { grid-template-columns: repeat(5, 1fr); }
        .hidden { display: none; }
        .muscle-btn {
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        .muscle-btn.active {
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
            transform: scale(1.05);
        }
        .session-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .badge-force { background: linear-gradient(135deg, #f97316 0%, #fb923c 100%); color: white; }
        .badge-endurance { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; }
        .badge-equilibre { background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%); color: white; }
        .avatar-upload {
            width: 120px;
            height: 120px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin: 0 auto 1rem;
            cursor: pointer;
            border: 3px dashed rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
            overflow: hidden;
        }
        .avatar-upload:hover { border-color: #06b6d4; background: rgba(6, 182, 212, 0.1); }
        .avatar-upload img { width: 100%; height: 100%; object-fit: cover; }
        .user-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }
        .tab-btn.active { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; }
        .rm-result {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%);
            border: 2px solid rgba(16, 185, 129, 0.5);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            margin: 1.5rem 0;
        }
        .sub-tab-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        .sub-tab-btn.active { background: rgba(6, 182, 212, 0.3); color: white; }
        .content-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .exercise-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .exercise-card h4 { color: #67e8f9; margin-bottom: 0.75rem; font-size: 1.1rem; }
        .exercise-card ul { list-style: none; padding-left: 0; }
        .exercise-card li {
            color: rgba(255, 255, 255, 0.85);
            padding: 0.4rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        .exercise-card li:before { content: "→"; position: absolute; left: 0; color: #06b6d4; }
        .tip-box {
            background: rgba(16, 185, 129, 0.15);
            border-left: 4px solid #10b981;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning-box {
            background: rgba(251, 146, 60, 0.15);
            border-left: 4px solid #fb923c;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        .anatomy-image-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 1rem;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .anatomy-image-container img { width: 100%; height: auto; border-radius: 0.75rem; margin-bottom: 0.5rem; }
        .muscle-info-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border-left: 4px solid #06b6d4;
        }
        .muscle-info-card h4 {
            color: #67e8f9;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .muscle-info-section { margin-top: 0.75rem; }
        .muscle-info-section h5 { color: #10b981; font-size: 0.95rem; margin-bottom: 0.5rem; font-weight: 600; }
        .muscle-info-section p { color: rgba(255, 255, 255, 0.85); line-height: 1.6; margin-bottom: 0.5rem; }
        .muscle-info-section ul { list-style: none; padding-left: 0; }
        .muscle-info-section li {
            color: rgba(255, 255, 255, 0.85);
            padding: 0.3rem 0;
            padding-left: 1.5rem;
            position: relative;
            line-height: 1.5;
        }
        .muscle-info-section li:before { content: "•"; position: absolute; left: 0.5rem; color: #06b6d4; font-weight: bold; }
        .rm-history-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .mobile-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .mobile-table th, .mobile-table td {
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .mobile-table th {
            background: rgba(6, 182, 212, 0.3);
            color: #67e8f9;
            font-weight: 600;
        }
        .mobile-table td {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.85);
        }
        .mobile-table tr:hover td { background: rgba(255, 255, 255, 0.1); }
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #06b6d4;
        }
        .default-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>// Données des cours et exercices
        const coursData = {
            principes: [
                {
                    titre: "Progression Progressive",
                    contenu: "Augmentez graduellement la charge, le volume ou l'intensité pour continuer à progresser. Visez une augmentation de 2-5% par semaine.",
                    conseils: [
                        "Augmentez d'abord les répétitions avant d'augmenter la charge",
                        "Tenez un journal d'entraînement",
                        "Soyez patient, la progression prend du temps"
                    ]
                },
                {
                    titre: "Récupération Adéquate",
                    contenu: "Le muscle se construit pendant le repos, pas pendant l'entraînement. Respectez 48-72h de repos entre deux séances pour le même groupe musculaire.",
                    conseils: [
                        "Dormez 7-9 heures par nuit",
                        "Hydratez-vous bien",
                        "Mangez suffisamment de protéines (1.6-2.2g/kg)"
                    ]
                },
                {
                    titre: "Technique Avant Charge",
                    contenu: "Une bonne technique prévient les blessures et maximise les gains. Maîtrisez le mouvement avant d'augmenter la charge.",
                    conseils: [
                        "Filmez-vous pour vérifier votre technique",
                        "N'hésitez pas à diminuer la charge si nécessaire",
                        "Concentrez-vous sur le muscle ciblé"
                    ]
                }
            ],
            hygiene: {
                avant: [
                    {
                        titre: "Alimentation pré-séance",
                        contenu: "Mangez 2-3 heures avant l'entraînement un repas équilibré avec glucides complexes et protéines. Évitez les graisses lourdes qui ralentissent la digestion."
                    },
                    {
                        titre: "Hydratation",
                        contenu: "Buvez 500ml d'eau 2 heures avant la séance. Hydratez-vous régulièrement tout au long de la journée."
                    },
                    {
                        titre: "Échauffement",
                        contenu: "Consacrez 10-15 minutes à un échauffement progressif : cardio léger puis mobilisations articulaires et séries d'approche avec charges légères."
                    },
                    {
                        titre: "Sommeil",
                        contenu: "Dormez 7-9 heures la nuit précédente. Un bon sommeil optimise la performance et réduit le risque de blessure."
                    }
                ],
                pendant: [
                    {
                        titre: "Hydratation continue",
                        contenu: "Buvez 150-200ml d'eau toutes les 15-20 minutes pendant l'effort. Ne attendez pas d'avoir soif, c'est déjà un signe de déshydratation."
                    },
                    {
                        titre: "Respiration",
                        contenu: "Expirez pendant la phase concentrique (effort), inspirez pendant la phase excentrique (retour). Ne bloquez jamais votre respiration."
                    },
                    {
                        titre: "Technique et sécurité",
                        contenu: "Privilégiez toujours la qualité du mouvement sur la quantité de charge. Gardez le dos droit et engagez votre ceinture abdominale."
                    },
                    {
                        titre: "Écoute du corps",
                        contenu: "Différenciez fatigue musculaire normale et douleur articulaire ou tendineuse. Arrêtez-vous en cas de douleur anormale."
                    }
                ],
                apres: [
                    {
                        titre: "Retour au calme",
                        contenu: "Terminez par 5-10 minutes d'activité légère (marche, vélo doux) pour faciliter l'élimination des déchets métaboliques."
                    },
                    {
                        titre: "Étirements",
                        contenu: "Étirez les muscles travaillés pendant 15-20 secondes par groupe musculaire. Les étirements légers favorisent la récupération."
                    },
                    {
                        titre: "Nutrition post-effort",
                        contenu: "Dans les 30-60 minutes : collation avec protéines (20-30g) et glucides. Repas complet dans les 2-3 heures suivantes."
                    },
                    {
                        titre: "Hydratation et récupération",
                        contenu: "Continuez à vous hydrater (500ml minimum). Prenez une douche tiède-fraîche pour favoriser la récupération musculaire."
                    },
                    {
                        titre: "Repos",
                        contenu: "Respectez 48-72h de repos avant de retravailler le même groupe musculaire. Le muscle se construit pendant le repos, pas pendant l'effort."
                    }
                ]
            },
            mobiles: [
                {
                    nom: "FORCE",
                    objectif: "Développer la force maximale",
                    charge: "85-100% de la CM",
                    repetitions: "1 à 5 répétitions",
                    series: "4 à 6 séries",
                    repos: "3 à 5 minutes",
                    color: "#f97316",
                    formes: [
                        "Méthode des efforts maximaux (charges très lourdes, 1-3 reps)",
                        "Méthode bulgare (séries courtes avec charges maximales)",
                        "Pyramide descendante (dégressif de charge)",
                        "Méthode 5x5 (5 séries de 5 répétitions)"
                    ]
                },
                {
                    nom: "ÉQUILIBRE / VOLUME",
                    objectif: "Développer le volume musculaire (hypertrophie)",
                    charge: "65-80% de la CM",
                    repetitions: "8 à 12 répétitions",
                    series: "3 à 5 séries",
                    repos: "1 à 2 minutes",
                    color: "#10b981",
                    formes: [
                        "Méthode classique (séries à répétitions constantes)",
                        "Superset (enchaînement de 2 exercices sans repos)",
                        "Drop set (séries dégressives sans repos)",
                        "Tempo training (contrôle de la vitesse d'exécution)"
                    ]
                },
                {
                    nom: "ENDURANCE",
                    objectif: "Développer l'endurance musculaire",
                    charge: "40-60% de la CM",
                    repetitions: "15 à 25+ répétitions",
                    series: "3 à 5 séries",
                    repos: "30 sec à 1 min",
                    color: "#06b6d4",
                    formes: [
                        "Circuit training (enchaînement de plusieurs exercices)",
                        "Méthode continue (répétitions élevées sans pause)",
                        "HIIT musculaire (intervalles courts haute intensité)",
                        "Tabata (20 sec effort / 10 sec repos, 8 rounds)"
                    ]
                }
            ],
            typesContraction: [
                {
                    type: "Concentrique",
                    definition: "Le muscle se raccourcit en produisant une force (phase de poussée/tirage)",
                    exemple: "Monter la barre au développé couché",
                    mobile: "FORCE et ÉQUILIBRE"
                },
                {
                    type: "Excentrique",
                    definition: "Le muscle s'allonge tout en résistant à une charge (phase de freinage)",
                    exemple: "Descendre la barre au développé couché",
                    mobile: "FORCE (travail excentrique lourd)"
                },
                {
                    type: "Isométrique",
                    definition: "Le muscle se contracte sans changement de longueur (position statique maintenue)",
                    exemple: "Gainage, maintien d'une position",
                    mobile: "ENDURANCE (gainage) et FORCE (arrêts)"
                },
                {
                    type: "Pliométrique",
                    definition: "Enchaînement rapide excentrique-concentrique (rebond explosif)",
                    exemple: "Squat sauté, pompes claquées",
                    mobile: "FORCE (puissance explosive)"
                }
            ],
            exercicesPectoraux: [
                {
                    nom: "Développé couché (haltères ou barre)",
                    description: "Exercice de base incontournable pour les pectoraux",
                    videos: [
                        { titre: "Développé couché barre", url: "https://www.youtube.com/watch?v=Kv7eVyDiN3U" },
                        { titre: "Développé couché haltères", url: "https://www.youtube.com/watch?v=Gf65Yy0-wGI" }
                    ],
                    technique: [
                        "Allongez-vous sur le banc, pieds bien ancrés au sol",
                        "Barre : saisissez légèrement plus large que les épaules",
                        "Haltères : positionnez-les au-dessus de la poitrine",
                        "Descendez la charge de manière contrôlée jusqu'au bas des pectoraux",
                        "Poussez en contractant les pectoraux, coudes à 45° du corps",
                        "Gardez les omoplates serrées et le dos légèrement cambré"
                    ],
                    variantes: ["Barre libre", "Haltères", "Barre guidée", "Prise serrée", "Prise large"]
                },
                {
                    nom: "Développé incliné (haltères ou barre)",
                    description: "Cible le haut des pectoraux (faisceau claviculaire)",
                    videos: [
                        { titre: "Développé incliné barre", url: "https://www.youtube.com/watch?v=d5hmgyUPYUg" },
                        { titre: "Développé incliné haltères", url: "https://www.youtube.com/watch?v=vffVns9SdFk" }
                    ],
                    technique: [
                        "Réglez le banc à 30-45° d'inclinaison",
                        "Position identique au développé couché",
                        "Descendez la charge vers le haut de la poitrine",
                        "Poussez en direction du plafond",
                        "Maintenez les omoplates serrées tout le long du mouvement",
                        "Ne cambrez pas excessivement le dos"
                    ],
                    variantes: ["Barre libre", "Haltères", "Inclinaison 30°", "Inclinaison 45°"]
                },
                {
                    nom: "Écarté couché",
                    description: "Excellent pour l'étirement et la congestion des pectoraux",
                    videos: [
                        { titre: "Écarté couché", url: "https://www.youtube.com/watch?v=L0MHPjzoJS8" }
                    ],
                    technique: [
                        "Allongé sur un banc plat, haltères au-dessus de la poitrine",
                        "Bras tendus avec une légère flexion permanente des coudes",
                        "Écartez les bras en arc de cercle jusqu'à sentir l'étirement",
                        "Descendez jusqu'à ce que les haltères soient au niveau de la poitrine",
                        "Remontez en contractant fort les pectoraux",
                        "Ne verrouillez jamais complètement les coudes"
                    ],
                    variantes: ["Écarté plat", "Écarté incliné", "Écarté décliné"]
                },
                {
                    nom: "Poulie vis-à-vis",
                    description: "Travaille les pectoraux avec une tension constante",
                    videos: [
                        { titre: "Poulie vis-à-vis", url: "https://www.youtube.com/watch?v=Puu3zs0hATI" }
                    ],
                    technique: [
                        "Placez-vous debout entre deux poulies hautes",
                        "Saisissez les poignées, un pied légèrement devant l'autre",
                        "Penchez le buste légèrement en avant",
                        "Ramenez les mains devant vous en croisant légèrement",
                        "Gardez les coudes semi-fléchis tout au long du mouvement",
                        "Contractez fort les pectoraux en position maximale"
                    ],
                    variantes: ["Poulie haute (bas des pecs)", "Poulie basse (haut des pecs)", "Poulie médiane", "Unilatéral"]
                },
                {
                    nom: "Dips",
                    description: "Exercice au poids du corps très efficace pour pectoraux et triceps",
                    videos: [
                        { titre: "Dips", url: "https://www.youtube.com/shorts/ZE1LMMVYgpQ" }
                    ],
                    technique: [
                        "Saisissez les barres parallèles, bras tendus",
                        "Penchez le buste en avant (environ 30°) pour cibler les pectoraux",
                        "Descendez en fléchissant les coudes jusqu'à 90° minimum",
                        "Écartez légèrement les coudes vers l'extérieur",
                        "Poussez fort pour remonter en contractant les pectoraux",
                        "Plus le buste est penché, plus les pectoraux travaillent"
                    ],
                    variantes: ["Poids du corps", "Lesté (ceinture + poids)", "Assisté (élastique)", "Barres parallèles larges"]
                }
            ],
            exercicesDos: [
                {
                    nom: "Tirage vertical",
                    description: "Exercice de base pour développer la largeur du dos",
                    videos: [
                        { titre: "Tirage vertical", url: "https://www.youtube.com/shorts/XClPH0DfdFI" }
                    ],
                    technique: [
                        "Assis à la machine, genoux bloqués sous les supports",
                        "Saisissez la barre en pronation (paumes vers l'avant), large",
                        "Tirez la barre vers le haut de la poitrine",
                        "Contractez les omoplates en les rapprochant",
                        "Gardez le buste légèrement en arrière (10-15°)",
                        "Contrôlez la remontée, ne vous laissez pas tirer"
                    ],
                    variantes: ["Prise large pronation", "Prise serrée supination", "Prise neutre", "Unilatéral"]
                },
                {
                    nom: "Tirage horizontal",
                    description: "Développe l'épaisseur du dos et les trapèzes moyens",
                    videos: [
                        { titre: "Tirage horizontal", url: "https://www.youtube.com/shorts/hnNjcQI9ZMU" }
                    ],
                    technique: [
                        "Assis à la machine, pieds sur les cales",
                        "Saisissez la poignée, bras tendus",
                        "Tirez vers le bas du sternum en gardant le buste droit",
                        "Serrez fort les omoplates en arrière",
                        "Gardez les coudes près du corps",
                        "Revenez en contrôlant, sentez l'étirement"
                    ],
                    variantes: ["Prise serrée", "Prise large", "Prise neutre", "Corde"]
                },
                {
                    nom: "Tractions",
                    description: "Le roi des exercices pour le dos au poids du corps",
                    videos: [
                        { titre: "Tractions", url: "https://www.youtube.com/watch?v=bxguzp1DCFw" }
                    ],
                    technique: [
                        "Suspendez-vous à une barre fixe",
                        "Pronation (paumes devant) pour largeur, supination (paumes vers soi) pour épaisseur",
                        "Tirez jusqu'à ce que le menton dépasse la barre",
                        "Contractez fort les omoplates en haut du mouvement",
                        "Descendez de manière contrôlée jusqu'à extension complète",
                        "Évitez de vous balancer ou de donner des coups de jambes"
                    ],
                    variantes: ["Pronation large", "Supination serrée", "Prise neutre", "Lesté", "Assisté"]
                },
                {
                    nom: "Rowing barre",
                    description: "Développe l'épaisseur du dos et la masse globale",
                    videos: [
                        { titre: "Rowing barre", url: "https://www.youtube.com/watch?v=69frLpCDGkc" }
                    ],
                    technique: [
                        "Penchez-vous en avant, dos droit, genoux légèrement fléchis",
                        "Saisissez la barre en pronation, mains écartées largeur épaules",
                        "Tirez la barre vers le bas des abdominaux",
                        "Serrez les omoplates en haut du mouvement",
                        "Gardez les coudes près du corps",
                        "Maintenez le dos droit tout au long de l'exercice"
                    ],
                    variantes: ["Prise pronation", "Prise supination (Yates)", "Barre T", "Penché à 45°", "Penché à 90°"]
                },
                {
                    nom: "Rowing haltère",
                    description: "Travail unilatéral pour corriger les déséquilibres",
                    videos: [
                        { titre: "Rowing haltère", url: "https://www.youtube.com/watch?v=jyrudAO4Rxc" }
                    ],
                    technique: [
                        "Un genou et une main en appui sur un banc",
                        "L'autre pied au sol, dos parallèle au sol",
                        "Haltère dans la main libre, bras tendu",
                        "Tirez l'haltère vers la hanche en gardant le coude près du corps",
                        "Contractez l'omoplate en haut",
                        "Descendez en contrôlant jusqu'à extension complète"
                    ],
                    variantes: ["Un bras sur banc", "Deux bras penché", "Appui sur rack", "Rowing Kroc (lourd, explosif)"]
                },
                {
                    nom: "Back face pull",
                    description: "Isole l'arrière des épaules et les trapèzes inférieurs",
                    videos: [
                        { titre: "Back face pull", url: "https://www.youtube.com/shorts/PvmQURl5zKY" }
                    ],
                    technique: [
                        "Debout face à une poulie haute avec corde",
                        "Saisissez les extrémités de la corde, bras tendus",
                        "Tirez la corde vers le visage en écartant les mains",
                        "Les coudes montent haut et vers l'extérieur",
                        "Contractez fort l'arrière des épaules et entre les omoplates",
                        "Revenez lentement en contrôlant"
                    ],
                    variantes: ["Poulie haute", "Corde", "Poignées séparées", "Élastique"]
                }
            ],
            exercicesEpaules: [
                {
                    nom: "Développé militaire",
                    description: "Exercice de base pour les deltoïdes",
                    videos: [
                        { titre: "Développé militaire", url: "https://www.youtube.com/watch?v=NQ-JJYay1TM" }
                    ],
                    technique: [
                        "Debout ou assis, barre devant les épaules au niveau des clavicules",
                        "Prise légèrement plus large que les épaules",
                        "Poussez verticalement au-dessus de la tête jusqu'à extension complète",
                        "Gardez les abdominaux gainés et le dos droit",
                        "Descendez de manière contrôlée jusqu'aux clavicules",
                        "Ne cambrez pas excessivement le dos"
                    ],
                    variantes: ["Barre devant", "Barre nuque", "Haltères", "Debout", "Assis"]
                },
                {
                    nom: "Élévations latérales",
                    description: "Cible spécifiquement les deltoïdes moyens",
                    videos: [
                        { titre: "Élévations latérales", url: "https://www.youtube.com/watch?v=-_XE4qbV7Yw" }
                    ],
                    technique: [
                        "Debout, haltères le long du corps",
                        "Gardez une légère flexion permanente des coudes",
                        "Élevez les bras sur les côtés jusqu'à l'horizontale",
                        "Les pouces légèrement vers le bas en haut du mouvement",
                        "Contrôlez la descente, ne laissez pas tomber les haltères",
                        "Évitez de monter les épaules (trapèzes)"
                    ],
                    variantes: ["Haltères", "Poulie basse", "Unilatéral", "Assis", "Buste penché"]
                },
                {
                    nom: "Delt face pull",
                    description: "Travaille l'arrière des épaules avec rotation externe",
                    videos: [
                        { titre: "Delt face pull", url: "https://www.youtube.com/watch?v=a9AaQh1dtRs" }
                    ],
                    technique: [
                        "Debout face à une poulie réglée à hauteur du visage",
                        "Saisissez la corde avec les paumes face à face",
                        "Tirez vers le visage en écartant les mains",
                        "Les coudes restent hauts et s'écartent",
                        "Effectuez une rotation externe en fin de mouvement",
                        "Contractez l'arrière des épaules et revenez lentement"
                    ],
                    variantes: ["Corde à la poulie", "Élastique", "Assis", "Debout"]
                }
            ],
            exercicesBras: [
                {
                    nom: "Larry Scott (Curl pupitre)",
                    description: "Isole totalement les biceps, popularisé par Larry Scott",
                    videos: [
                        { titre: "Larry Scott", url: "https://www.youtube.com/watch?v=8MSRc2_b2d4" }
                    ],
                    technique: [
                        "Assis ou debout, bras en appui sur le pupitre",
                        "Saisissez la barre en supination (paumes vers le haut)",
                        "Fléchissez les coudes en amenant la barre vers les épaules",
                        "Gardez les bras bien plaqués sur le pupitre",
                        "Contractez fort en haut du mouvement",
                        "Descendez lentement sans verrouiller complètement les coudes"
                    ],
                    variantes: ["Barre EZ", "Barre droite", "Haltères unilatéral", "Pupitre vertical", "Pupitre incliné"]
                },
                {
                    nom: "Curl barre (poulie, barre ou haltère)",
                    description: "Exercice de base pour les biceps",
                    videos: [
                        { titre: "Curl barre", url: "https://www.youtube.com/watch?v=ndg4oTdo4Xs" }
                    ],
                    technique: [
                        "Debout, barre en supination, mains largeur épaules",
                        "Coudes fixes le long du corps",
                        "Fléchissez les coudes en amenant la barre vers les épaules",
                        "Contractez fort les biceps en haut",
                        "Descendez lentement en contrôlant",
                        "Ne bougez pas les épaules ni le buste"
                    ],
                    variantes: ["Barre EZ", "Barre droite", "Haltères simultanés", "Haltères alternés", "Poulie basse", "Prise large", "Prise serrée"]
                },
                {
                    nom: "Curl haltère",
                    description: "Cible les biceps avec rotation de l'avant-bras",
                    videos: [
                        { titre: "Curl haltère", url: "https://www.youtube.com/watch?v=ndg4oTdo4Xs" }
                    ],
                    technique: [
                        "Debout, haltères le long du corps",
                        "Coudes fixes le long du corps",
                        "Fléchissez les coudes en effectuant une rotation (supination)",
                        "Commencez paume vers la cuisse, finissez paume vers l'épaule",
                        "Montez jusqu'à contraction maximale",
                        "Descendez lentement en contrôlant"
                    ],
                    variantes: ["Haltères simultanés", "Haltères alternés", "Prise marteau", "Sur banc incliné"]
                },
                {
                    nom: "Barre au front",
                    description: "Excellent pour développer la masse des triceps",
                    videos: [
                        { titre: "Barre au front", url: "https://www.youtube.com/watch?v=e3X7IFQEZrc" }
                    ],
                    technique: [
                        "Allongé sur un banc, barre au-dessus du front",
                        "Prise serrée, coudes fixes pointant vers le plafond",
                        "Descendez la barre vers le front en fléchissant uniquement les coudes",
                        "Arrêtez juste au-dessus du front",
                        "Remontez en contractant fort les triceps",
                        "Ne bougez surtout pas les coudes (ils restent fixes)"
                    ],
                    variantes: ["Barre EZ", "Barre droite", "Haltères", "Vers le front", "Vers le sommet du crâne", "Banc plat", "Banc décliné"]
                },
                {
                    nom: "Extension corde",
                    description: "Exercice d'isolation pour les triceps à la poulie",
                    videos: [
                        { titre: "Extension corde", url: "https://www.youtube.com/watch?v=TDCmyWi5iyU" }
                    ],
                    technique: [
                        "Debout face à une poulie haute avec corde",
                        "Saisissez la corde, coudes fixes le long du corps",
                        "Poussez vers le bas jusqu'à extension complète des bras",
                        "Écartez légèrement les extrémités de la corde en bas",
                        "Contractez fort les triceps en position basse",
                        "Remontez en contrôlant sans bouger les coudes"
                    ],
                    variantes: ["Corde", "Barre droite", "Barre EZ", "Prise pronation", "Prise supination", "Unilatéral"]
                },
                {
                    nom: "Extension haltère",
                    description: "Travaille les trois chefs des triceps en profondeur",
                    videos: [
                        { titre: "Extension haltère", url: "https://www.youtube.com/watch?v=rFNQv9eae6I" }
                    ],
                    technique: [
                        "Debout ou assis, un haltère tenu à deux mains au-dessus de la tête",
                        "Coudes pointant vers le plafond, serrés près des oreilles",
                        "Descendez l'haltère derrière la tête en fléchissant les coudes",
                        "Sentez l'étirement des triceps en bas",
                        "Remontez en poussant jusqu'à extension complète",
                        "Gardez les coudes fixes et serrés"
                    ],
                    variantes: ["Un haltère à deux mains", "Deux haltères simultanés", "Unilatéral", "Debout", "Assis"]
                }
            ],
            exercicesJambes: [
                {
                    nom: "Squat",
                    description: "Le roi des exercices pour les jambes",
                    technique: [
                        "Barre sur les trapèzes (squat high) ou deltoïdes postérieurs (squat low)",
                        "Pieds écartés largeur des épaules, légèrement en canard",
                        "Descendez en poussant les fesses en arrière, dos droit",
                        "Allez au moins jusqu'à la parallèle (cuisses parallèles au sol)",
                        "Gardez les genoux dans l'axe des pieds",
                        "Poussez fort en gardant les talons au sol"
                    ],
                    variantes: ["Squat barre haute", "Squat barre basse", "Squat avant (front squat)", "Goblet squat", "Squat bulgare", "Squat sumo"]
                },
                {
                    nom: "Soulevé de terre",
                    description: "Exercice complet pour les jambes, fessiers et dos",
                    technique: [
                        "Pieds écartés largeur des hanches sous la barre",
                        "Saisissez la barre, dos droit, regard devant",
                        "Poussez fort avec les jambes en gardant la barre proche du corps",
                        "Tendez les hanches en serrant les fessiers en haut",
                        "Gardez les épaules en arrière et la poitrine sortie",
                        "Descendez en contrôlant, même chemin qu'à la montée"
                    ],
                    variantes: ["Soulevé de terre classique", "Soulevé de terre sumo", "Soulevé de terre roumain", "Soulevé de terre jambes tendues"]
                },
                {
                    nom: "Fentes",
                    description: "Excellent pour quadriceps, fessiers et équilibre",
                    technique: [
                        "Debout, faites un grand pas en avant",
                        "Descendez le genou arrière vers le sol",
                        "Le genou avant reste dans l'axe du pied et ne dépasse pas les orteils",
                        "Le buste reste droit et vertical",
                        "Poussez sur le talon avant pour remonter",
                        "Alternez les jambes ou faites toutes les répétitions sur une jambe"
                    ],
                    variantes: ["Fentes avant", "Fentes arrière", "Fentes marchées", "Fentes latérales", "Fentes bulgares (pied arrière surélevé)", "Fentes sautées"]
                },
                {
                    nom: "Presse inclinée",
                    description: "Alternative au squat avec moins de contraintes sur le dos",
                    technique: [
                        "Assis ou allongé dans la machine, dos bien plaqué",
                        "Pieds écartés largeur épaules sur la plateforme",
                        "Débloquez la sécurité, descendez en contrôlant",
                        "Allez jusqu'à 90° de flexion des genoux (ou plus)",
                        "Poussez fort en gardant les talons bien ancrés",
                        "Ne verrouillez pas complètement les genoux en haut"
                    ],
                    variantes: ["Pieds hauts (fessiers)", "Pieds bas (quadriceps)", "Pieds serrés", "Pieds larges", "Unilatéral"]
                },
                {
                    nom: "Leg curl",
                    description: "Isole les ischio-jambiers",
                    technique: [
                        "Allongé sur la machine, genoux dans le vide",
                        "Chevilles sous le boudin, jambes tendues",
                        "Fléchissez les jambes en ramenant les talons vers les fessiers",
                        "Contractez fort les ischio-jambiers en haut",
                        "Descendez lentement en contrôlant",
                        "Ne cambrez pas le dos, gardez le bassin plaqué"
                    ],
                    variantes: ["Leg curl allongé", "Leg curl assis", "Leg curl debout unilatéral"]
                },
                {
                    nom: "Leg extension",
                    description: "Isole les quadriceps",
                    technique: [
                        "Assis sur la machine, dos bien calé",
                        "Chevilles sous le boudin, genoux fléchis à 90°",
                        "Tendez les jambes jusqu'à extension complète",
                        "Contractez fort les quadriceps en haut",
                        "Descendez lentement en contrôlant",
                        "Ne bloquez pas brutalement les genoux en extension"
                    ],
                    variantes: ["Deux jambes simultanées", "Unilatéral", "Pieds en rotation externe", "Pieds en rotation interne"]
                },
                {
                    nom: "Adducteurs / Abducteurs machine",
                    description: "Renforce les muscles de l'intérieur et l'extérieur des cuisses",
                    technique: [
                        "Assis sur la machine, dos bien calé",
                        "ADDUCTEURS : Écartez les jambes puis refermez en contractant l'intérieur des cuisses",
                        "ABDUCTEURS : Jambes serrées puis écartez en contractant l'extérieur des cuisses",
                        "Mouvement lent et contrôlé",
                        "Maintenez la contraction 1 seconde en position maximale",
                        "Important pour la stabilité du genou et du bassin"
                    ],
                    variantes: ["Adducteurs machine", "Abducteurs machine", "Adducteurs à la poulie", "Élévations latérales jambe au sol"]
                }
            ],
            exercicesAbdos: [
                {
                    nom: "Crunch",
                    description: "Exercice de base pour le grand droit des abdominaux",
                    technique: [
                        "Allongé sur le dos, genoux fléchis, pieds au sol",
                        "Mains derrière la tête ou croisées sur la poitrine",
                        "Décollez les épaules du sol en contractant les abdos",
                        "Montez jusqu'à ce que les omoplates décollent",
                        "Expirez lors de la montée, inspirez lors de la descente",
                        "Ne tirez jamais sur la nuque"
                    ],
                    variantes: ["Crunch classique", "Crunch pieds surélevés", "Crunch à la poulie", "Crunch inversé"]
                },
                {
                    nom: "Planche (Gainage)",
                    description: "Exercice isométrique complet pour la sangle abdominale",
                    technique: [
                        "Position de pompe sur les avant-bras",
                        "Corps aligné de la tête aux pieds (ligne droite)",
                        "Coudes sous les épaules, regard vers le sol",
                        "Contractez abdos et fessiers",
                        "Respirez normalement, ne retenez pas votre souffle",
                        "Maintenez la position sans creuser le dos"
                    ],
                    variantes: ["Planche sur avant-bras", "Planche latérale", "Planche dynamique", "Planche sur mains"]
                },
                {
                    nom: "Russian Twist",
                    description: "Rotation pour cibler les obliques",
                    technique: [
                        "Assis, genoux fléchis, pieds légèrement décollés du sol",
                        "Buste incliné en arrière à 45°",
                        "Mains jointes devant la poitrine (ou avec poids)",
                        "Effectuez une rotation du buste de gauche à droite",
                        "Touchez le sol de chaque côté avec les mains",
                        "Gardez les abdos contractés et le dos droit"
                    ],
                    variantes: ["Sans poids", "Avec médecine ball", "Avec haltère", "Pieds au sol"]
                },
                {
                    nom: "Levée de jambes",
                    description: "Cible le bas des abdominaux",
                    technique: [
                        "Allongé sur le dos, mains sous les fessiers ou le long du corps",
                        "Jambes tendues, pieds joints",
                        "Levez les jambes jusqu'à 90° en gardant le bas du dos plaqué",
                        "Descendez lentement sans toucher le sol",
                        "Gardez les jambes tendues ou légèrement fléchies",
                        "Contractez les abdos tout au long du mouvement"
                    ],
                    variantes: ["Jambes tendues", "Jambes fléchies", "Suspendu à une barre", "Sur banc incliné"]
                },
                {
                    nom: "Mountain Climbers",
                    description: "Exercice cardio et abdos combinés",
                    technique: [
                        "Position de pompe, bras tendus",
                        "Amenez un genou vers la poitrine",
                        "Alternez rapidement les jambes",
                        "Gardez les hanches basses",
                        "Maintenez le gainage abdominal",
                        "Respirez régulièrement"
                    ],
                    variantes: ["Lent et contrôlé", "Rapide et explosif", "Croisé (genou vers coude opposé)", "Avec pause"]
                },
                {
                    nom: "Bicycle Crunch",
                    description: "Travail dynamique des obliques",
                    technique: [
                        "Allongé sur le dos, mains derrière la tête",
                        "Jambes surélevées, genoux fléchis",
                        "Amenez le coude droit vers le genou gauche",
                        "Alternez de manière fluide",
                        "Tendez la jambe opposée",
                        "Effectuez une rotation complète du buste"
                    ],
                    variantes: ["Lent et contrôlé", "Tempo rapide", "Avec pause en contraction"]
                },
                {
                    nom: "Dead Bug",
                    description: "Stabilité du core et coordination",
                    technique: [
                        "Allongé sur le dos, bras tendus vers le plafond",
                        "Genoux fléchis à 90°, tibias parallèles au sol",
                        "Tendez simultanément un bras et la jambe opposée",
                        "Gardez le bas du dos plaqué au sol",
                        "Revenez à la position de départ",
                        "Alternez bras et jambes de manière contrôlée"
                    ],
                    variantes: ["Classique", "Jambes tendues", "Avec poids dans les mains"]
                },
                {
                    nom: "Hollow Hold",
                    description: "Gainage avancé pour force du core",
                    technique: [
                        "Allongé sur le dos, bras tendus au-dessus de la tête",
                        "Décollez légèrement épaules et jambes du sol",
                        "Corps en forme de banane creuse",
                        "Bas du dos reste plaqué au sol",
                        "Maintenez la position",
                        "Respirez calmement"
                    ],
                    variantes: ["Hollow hold classique", "Hollow rock (balancement)", "Progression genoux fléchis"]
                }
            ],
            anatomie: {
                "Pectoraux": {
                    role: "Les pectoraux sont les muscles principaux de la poitrine. Ils permettent l'adduction (rapprochement du bras vers le corps), la flexion de l'épaule et la rotation interne du bras. Ils sont essentiels dans les mouvements de poussée.",
                    insertions: [
                        "Origine : Clavicule (faisceau claviculaire), sternum et cartilages costaux (faisceau sterno-costal)",
                        "Terminaison : Lèvre latérale de la gouttière bicipitale de l'humérus",
                        "Le grand pectoral se divise en 3 faisceaux : claviculaire (haut), sternal (milieu) et abdominal (bas)"
                    ]
                },
                "Grand dorsal": {
                    role: "Le plus large muscle du dos, il permet l'extension, l'adduction et la rotation interne du bras. Il est le muscle principal dans les mouvements de tirage vertical (tractions) et contribue à la stabilité de l'épaule.",
                    insertions: [
                        "Origine : Processus épineux des 6 dernières vertèbres thoraciques, toutes les vertèbres lombaires, crête sacrée, crête iliaque et 3-4 dernières côtes",
                        "Terminaison : Gouttière bicipitale de l'humérus (sillon inter-tuberculaire)",
                        "Forme une large bande musculaire en forme de V dans le dos"
                    ]
                },
                "Trapèzes": {
                    role: "Muscle superficiel du dos en forme de trapèze, il permet l'élévation, l'abaissement et la rétraction des omoplates. Il stabilise également l'épaule lors des mouvements du bras et soutient le port de charges.",
                    insertions: [
                        "Origine : Ligament nuchal, processus épineux de C7 à T12, protubérance occipitale externe",
                        "Terminaison : Tiers latéral de la clavicule (faisceau supérieur), acromion et épine de la scapula (faisceau moyen et inférieur)",
                        "Se divise en 3 faisceaux : supérieur, moyen et inférieur avec des actions différentes"
                    ]
                },
                "Deltoïdes": {
                    role: "Muscle de l'épaule formant son galbe arrondi. Il permet l'abduction (élévation latérale), la flexion (faisceau antérieur) et l'extension (faisceau postérieur) du bras. C'est le muscle principal pour tous les mouvements de l'épaule.",
                    insertions: [
                        "Origine : Tiers latéral de la clavicule (antérieur), acromion (moyen), épine de la scapula (postérieur)",
                        "Terminaison : Tubérosité deltoïdienne de l'humérus (face latérale)",
                        "Se compose de 3 faisceaux distincts : antérieur, moyen (latéral) et postérieur"
                    ]
                },
                "Biceps": {
                    role: "Muscle à deux chefs situé à l'avant du bras. Il permet la flexion du coude et la supination de l'avant-bras (rotation de la paume vers le haut). Il assiste aussi la flexion de l'épaule.",
                    insertions: [
                        "Origine : Apophyse coracoïde (chef court) et tubercule supra-glénoïdien de la scapula (chef long)",
                        "Terminaison : Tubérosité radiale et aponévrose bicipitale (lacertus fibrosus)",
                        "Deux chefs distincts (long et court) qui fusionnent en un seul tendon distal"
                    ]
                },
                "Triceps": {
                    role: "Muscle à trois chefs situé à l'arrière du bras. Il permet l'extension du coude et l'extension de l'épaule (chef long). C'est le seul muscle extenseur du coude et il représente 2/3 de la masse du bras.",
                    insertions: [
                        "Origine : Tubercule infra-glénoïdien de la scapula (chef long), face postérieure de l'humérus au-dessus et au-dessous du sillon radial (chefs latéral et médial)",
                        "Terminaison : Olécrâne de l'ulna via un tendon commun",
                        "Trois chefs : long (traverse l'épaule), latéral (externe) et médial (profond)"
                    ]
                },
                "Abdominaux": {
                    role: "Groupe musculaire de la paroi abdominale antérieure. Ils permettent la flexion du tronc, la rotation et l'inclinaison latérale. Ils protègent les organes internes, stabilisent le bassin et participent à la respiration et à l'augmentation de la pression abdominale.",
                    insertions: [
                        "Grand droit : Crête pubienne (origine) → Cartilages costaux 5-7 et processus xiphoïde (terminaison)",
                        "Obliques externes : 8 dernières côtes → Crête iliaque et ligne blanche",
                        "Obliques internes : Crête iliaque → Cartilages costaux inférieurs et ligne blanche",
                        "Transverse : Cartilages costaux, fascia thoraco-lombaire, crête iliaque → Ligne blanche (muscle le plus profond)"
                    ]
                },
                "Quadriceps": {
                    role: "Le plus volumineux et puissant muscle du corps humain, situé à l'avant de la cuisse. Il permet l'extension du genou et la flexion de la hanche (droit fémoral). C'est le muscle principal de la marche, de la course et des sauts.",
                    insertions: [
                        "Origine : Épine iliaque antéro-inférieure (droit fémoral), grand trochanter et ligne âpre du fémur (vaste latéral et médial), face antérieure du fémur (vaste intermédiaire)",
                        "Terminaison : Tubérosité tibiale via le tendon patellaire (passe par la rotule)",
                        "Composé de 4 chefs : droit fémoral, vaste latéral, vaste médial et vaste intermédiaire"
                    ]
                },
                "Ischio-jambiers": {
                    role: "Groupe musculaire situé à l'arrière de la cuisse. Ils permettent l'extension de la hanche et la flexion du genou. Ils sont essentiels pour la course, le saut et la décélération. Muscle antagoniste du quadriceps.",
                    insertions: [
                        "Origine : Tubérosité ischiatique (semi-tendineux, semi-membraneux, chef long du biceps fémoral) et ligne âpre du fémur (chef court du biceps fémoral)",
                        "Terminaison : Tête de la fibula (biceps fémoral), face médiale du tibia (semi-tendineux et semi-membraneux)",
                        "Composé de 3 muscles : biceps fémoral (2 chefs), semi-tendineux et semi-membraneux"
                    ]
                },
                "Fessiers": {
                    role: "Le groupe musculaire le plus puissant du corps, formant les fesses. Le grand fessier permet l'extension et la rotation latérale de la hanche. Le moyen et petit fessier permettent l'abduction et stabilisent le bassin lors de la marche.",
                    insertions: [
                        "Grand fessier : Crête iliaque, sacrum, coccyx → Tubérosité glutéale du fémur et tractus ilio-tibial",
                        "Moyen fessier : Face externe de l'ilium → Grand trochanter du fémur",
                        "Petit fessier : Face externe de l'ilium (sous le moyen fessier) → Grand trochanter du fémur",
                        "Le grand fessier est le plus gros et superficiel, le moyen et petit sont plus profonds et latéraux"
                    ]
                },
                "Mollets": {
                    role: "Situés à l'arrière de la jambe, ils permettent la flexion plantaire (pointer les orteils) et participent à la flexion du genou (gastrocnémien). Ils sont essentiels pour la marche, la course, le saut et l'équilibre. Muscles très sollicités au quotidien.",
                    insertions: [
                        "Gastrocnémien (jumeau) : Condyles fémoraux (2 chefs médial et latéral) → Calcanéum via le tendon d'Achille",
                        "Soléaire : Face postérieure du tibia et fibula → Calcanéum via le tendon d'Achille",
                        "Le gastrocnémien est superficiel (forme le galbe du mollet), le soléaire est profond et plus volumineux"
                    ]
                }
            }
        };

        // Système de stockage
        const storage = {
            save(key, value, global = false) {
                try {
                    const storageKey = global ? key : `${app.currentUser}-${key}`;
                    localStorage.setItem(storageKey, JSON.stringify(value));
                    return true;
                } catch (e) {
                    console.error('Storage error:', e);
                    return false;
                }
            },
            get(key, global = false) {
                try {
                    const storageKey = global ? key : `${app.currentUser}-${key}`;
                    const item = localStorage.getItem(storageKey);
                    return {
                        exists: item !== null,
                        value: item
                    };
                } catch (e) {
                    return { exists: false, value: null };
                }
            },
            remove(key, global = false) {
                try {
                    const storageKey = global ? key : `${app.currentUser}-${key}`;
                    localStorage.removeItem(storageKey);
                    return true;
                } catch (e) {
                    return false;
                }
            }
        };class LivretApp {
            constructor() {
                this.currentUser = null;
                this.currentView = 'login';
                this.currentTab = 'dashboard';
                this.sessions = [];
                this.rmHistory = [];
                this.currentSession = null;
                this.userAvatar = null;
                this.musclesList = ['Pectoraux', 'Grand dorsal', 'Trapèzes', 'Deltoïdes', 'Biceps', 'Triceps', 'Abdominaux', 'Quadriceps', 'Ischio-jambiers', 'Fessiers', 'Mollets'];
                this.currentCoursTab = 'principes';
                this.exercicesTemp = [];
                this.musclesTemp = [];
                this.init();
            }

            init() {
                this.loadSessions();
                this.loadRMHistory();
                this.loadUserAvatar();
                this.render();
            }

            loadSessions() {
                if (!this.currentUser) return;
                const result = storage.get('sessions');
                if (result.exists) {
                    this.sessions = JSON.parse(result.value);
                }
            }

            saveSessions() {
                storage.save('sessions', this.sessions);
            }

            loadRMHistory() {
                if (!this.currentUser) return;
                const result = storage.get('rmHistory');
                if (result.exists) {
                    this.rmHistory = JSON.parse(result.value);
                }
            }

            saveRMHistory() {
                storage.save('rmHistory', this.rmHistory);
            }

            loadUserAvatar() {
                if (!this.currentUser) return;
                const result = storage.get('avatar');
                if (result.exists) {
                    this.userAvatar = JSON.parse(result.value);
                }
            }

            saveUserAvatar() {
                storage.save('avatar', this.userAvatar);
            }

            render() {
                const app = document.getElementById('app');
                
                if (this.currentView === 'login') {
                    app.innerHTML = this.renderLogin();
                    this.attachLoginEvents();
                } else if (this.currentView === 'signup') {
                    app.innerHTML = this.renderSignup();
                    this.attachSignupEvents();
                } else if (this.currentView === 'dashboard') {
                    app.innerHTML = this.renderDashboard();
                    this.attachDashboardEvents();
                } else if (this.currentView === 'session-form') {
                    app.innerHTML = this.renderSessionForm();
                    this.attachSessionFormEvents();
                } else if (this.currentView === 'session-detail') {
                    app.innerHTML = this.renderSessionDetail();
                }
            }

            renderLogin() {
                const users = [];
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.startsWith('user-') && !key.includes('-sessions') && !key.includes('-rmHistory') && !key.includes('-avatar')) {
                        const username = key.replace('user-', '');
                        users.push(username);
                    }
                }

                return `
                    <div class="container">
                        <div class="card" style="max-width: 450px; margin: 4rem auto;">
                            <div class="text-center mb-4">
                                <div class="user-icon" style="margin: 0 auto 1.5rem;">💪</div>
                                <h1 class="text-white" style="font-size: 2rem; margin-bottom: 0.5rem;">Livret de Musculation</h1>
                                <p class="text-cyan">Suivi personnalisé</p>
                            </div>
                            
                            ${users.length > 0 ? `
                                <div class="mb-4">
                                    <label class="text-white mb-1" style="display: block;">Sélectionner un profil</label>
                                    <select class="input" id="select-user">
                                        <option value="">-- Choisir un profil --</option>
                                        ${users.map(u => `<option value="${u}">${u}</option>`).join('')}
                                    </select>
                                </div>
                                <button class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;" onclick="app.handleSelectUser()">Se connecter</button>
                                <div class="text-center">
                                    <button class="btn btn-link" onclick="app.showSignup()">Créer un nouveau profil</button>
                                </div>
                            ` : `
                                <div class="text-center">
                                    <p class="text-white mb-4" style="opacity: 0.8;">Aucun profil existant</p>
                                    <button class="btn btn-success" style="width: 100%;" onclick="app.showSignup()">Créer mon profil</button>
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }

            renderSignup() {
                return `
                    <div class="container">
                        <div class="card" style="max-width: 500px; margin: 2rem auto;">
                            <div class="text-center mb-4">
                                <h1 class="text-white" style="font-size: 2rem; margin-bottom: 0.5rem;">Créer mon profil</h1>
                                <p class="text-cyan">Renseignez vos informations</p>
                            </div>
                            
                            <form id="signup-form">
                                <div class="text-center mb-4">
                                    <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                                    <div class="avatar-upload" onclick="document.getElementById('avatar-input').click()">
                                        <span id="avatar-preview">📷</span>
                                    </div>
                                    <p class="text-white" style="opacity: 0.7; font-size: 0.9rem;">Cliquez pour ajouter une photo</p>
                                </div>

                                <div class="mb-2">
                                    <label class="text-white mb-1" style="display: block;">Prénom</label>
                                    <input type="text" class="input" id="signup-username" placeholder="Votre prénom" required>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-3 mb-2">
                                    <div>
                                        <label class="text-white mb-1" style="display: block;">Âge</label>
                                        <input type="number" class="input" id="signup-age" placeholder="Ex: 25" min="10" max="100" required>
                                    </div>
                                    <div>
                                        <label class="text-white mb-1" style="display: block;">Sexe</label>
                                        <select class="input" id="signup-sexe" required>
                                            <option value="">Choisir...</option>
                                            <option value="Homme">Homme</option>
                                            <option value="Femme">Femme</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 gap-3 mb-4">
                                    <div>
                                        <label class="text-white mb-1" style="display: block;">Taille (cm)</label>
                                        <input type="number" class="input" id="signup-taille" placeholder="Ex: 175" min="100" max="250" required>
                                    </div>
                                    <div>
                                        <label class="text-white mb-1" style="display: block;">Poids (kg)</label>
                                        <input type="number" class="input" id="signup-poids" placeholder="Ex: 70" min="30" max="200" step="0.1" required>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-success" style="width: 100%; margin-bottom: 1rem;">Créer mon profil</button>
                                
                                <div class="text-center">
                                    <button type="button" class="btn btn-link" onclick="app.showLogin()">Retour</button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
            }

            renderDashboard() {
                const userKey = `user-${this.currentUser}`;
                const userResult = storage.get(userKey, true);
                const userData = userResult.exists ? JSON.parse(userResult.value) : {};

                return `
                    <div class="container">
                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <div class="flex items-center gap-3">
                                    ${this.userAvatar ? 
                                        `<img src="${this.userAvatar}" class="profile-avatar" alt="Avatar">` : 
                                        `<div class="default-avatar">👤</div>`
                                    }
                                    <div>
                                        <h1 class="text-white" style="font-size: 2rem;">${this.currentUser}</h1>
                                        <p class="text-cyan" style="font-size: 0.9rem;">${userData.age} ans • ${userData.sexe} • ${userData.taille}cm • ${userData.poids}kg</p>
                                    </div>
                                </div>
                                <div class="flex gap-2">
                                    <button class="btn btn-warning" onclick="app.exportData()">💾 Exporter</button>
                                    <button class="btn btn-warning" onclick="app.importData()">📥 Importer</button>
                                    <button class="btn btn-secondary" onclick="app.logout()">Déconnexion</button>
                                </div>
                            </div>

                            <div class="flex gap-2 mb-4" style="overflow-x: auto;">
                                <button class="tab-btn ${this.currentTab === 'dashboard' ? 'active' : ''}" onclick="app.switchTab('dashboard')">📊 Dashboard</button>
                                <button class="tab-btn ${this.currentTab === 'profil' ? 'active' : ''}" onclick="app.switchTab('profil')">👤 Mon Profil</button>
                                <button class="tab-btn ${this.currentTab === 'rm' ? 'active' : ''}" onclick="app.switchTab('rm')">🎯 Calculateur 1RM</button>
                                <button class="tab-btn ${this.currentTab === 'sessions' ? 'active' : ''}" onclick="app.switchTab('sessions')">📝 Mes Séances</button>
                                <button class="tab-btn ${this.currentTab === 'cours' ? 'active' : ''}" onclick="app.switchTab('cours')">📚 Cours & Ressources</button>
                            </div>

                            ${this.currentTab === 'dashboard' ? this.renderDashboardTab() : ''}
                            ${this.currentTab === 'profil' ? this.renderProfilTab() : ''}
                            ${this.currentTab === 'rm' ? this.renderRMTab() : ''}
                            ${this.currentTab === 'sessions' ? this.renderSessionsTab() : ''}
                            ${this.currentTab === 'cours' ? this.renderCoursTab() : ''}
                        </div>
                    </div>
                `;
            }

            renderDashboardTab() {
                const stats = {
                    total: this.sessions.length,
                    force: this.sessions.filter(s => s.type === 'Force').length,
                    endurance: this.sessions.filter(s => s.type === 'Endurance').length,
                    equilibre: this.sessions.filter(s => s.type === 'Équilibre').length
                };

                return `
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(6, 182, 212, 0.3);">
                            <div class="text-cyan" style="font-size: 2.5rem; font-weight: bold;">${stats.total}</div>
                            <div class="text-white" style="opacity: 0.9;">Séances créées</div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.2) 0%, rgba(251, 146, 60, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(249, 115, 22, 0.3);">
                            <div style="color: #fb923c; font-size: 2.5rem; font-weight: bold;">${stats.force}</div>
                            <div class="text-white" style="opacity: 0.9;">Force</div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(6, 182, 212, 0.3);">
                            <div class="text-cyan" style="font-size: 2.5rem; font-weight: bold;">${stats.endurance}</div>
                            <div class="text-white" style="opacity: 0.9;">Endurance</div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(20, 184, 166, 0.2) 100%); border-radius: 1rem; padding: 1.5rem; border: 1px solid rgba(16, 185, 129, 0.3);">
                            <div style="color: #14b8a6; font-size: 2.5rem; font-weight: bold;">${stats.equilibre}</div>
                            <div class="text-white" style="opacity: 0.9;">Équilibre</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">💡 Conseil du jour</div>
                        <div class="text-white" style="opacity: 0.9;">N'oubliez pas de bien vous échauffer avant chaque séance et de vous étirer après. La récupération est aussi importante que l'entraînement !</div>
                    </div>
                `;
            }

            renderProfilTab() {
                const userKey = `user-${this.currentUser}`;
                const userResult = storage.get(userKey, true);
                const userData = userResult.exists ? JSON.parse(userResult.value) : {};

                return `
                    <div>
                        <h2 class="text-white mb-4" style="font-size: 1.5rem;">👤 Mon Profil</h2>
                        
                        <form id="profile-form">
                            <div class="text-center mb-4">
                                <input type="file" id="profile-avatar-input" accept="image/*" style="display: none;">
                                <div class="avatar-upload" onclick="document.getElementById('profile-avatar-input').click()">
                                    ${this.userAvatar ? 
                                        `<img src="${this.userAvatar}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">` : 
                                        `<span>📷</span>`
                                    }
                                </div>
                                <p class="text-white" style="opacity: 0.7; font-size: 0.9rem;">Cliquez pour changer la photo</p>
                            </div>

                            <div class="mb-2">
                                <label class="text-white mb-1" style="display: block;">Prénom</label>
                                <input type="text" class="input" id="profile-username" value="${this.currentUser}" readonly style="opacity: 0.6; cursor: not-allowed;">
                                <p class="text-white" style="opacity: 0.5; font-size: 0.8rem; margin-top: 0.25rem;">Le prénom ne peut pas être modifié</p>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3 mb-2">
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Âge</label>
                                    <input type="number" class="input" id="profile-age" value="${userData.age}" min="10" max="100" required>
                                </div>
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Sexe</label>
                                    <select class="input" id="profile-sexe" required>
                                        <option value="Homme" ${userData.sexe === 'Homme' ? 'selected' : ''}>Homme</option>
                                        <option value="Femme" ${userData.sexe === 'Femme' ? 'selected' : ''}>Femme</option>
                                    </select>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Taille (cm)</label>
                                    <input type="number" class="input" id="profile-taille" value="${userData.taille}" min="100" max="250" required>
                                </div>
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Poids (kg)</label>
                                    <input type="number" class="input" id="profile-poids" value="${userData.poids}" min="30" max="200" step="0.1" required>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-success" style="width: 100%;">💾 Enregistrer les modifications</button>
                        </form>
                    </div>
                `;
            }

            renderRMTab() {
                const groupedTests = {};
                this.rmHistory.forEach((test, index) => {
                    const muscle = test.muscle || 'Autre';
                    if (!groupedTests[muscle]) {
                        groupedTests[muscle] = [];
                    }
                    groupedTests[muscle].push({ ...test, originalIndex: index });
                });

                return `
                    <div>
                        <h2 class="text-white mb-2" style="font-size: 1.5rem;">Calculateur de 1RM</h2>
                        <p class="text-white mb-4" style="opacity: 0.8;">Calculez votre charge maximale sur une répétition</p>

                        <form id="rm-form" class="mb-4">
                            <div class="mb-2">
                                <label class="text-white mb-1" style="display: block;">Groupe musculaire</label>
                                <select class="input" id="rm-muscle" required>
                                    <option value="">Choisir...</option>
                                    <option value="Pectoraux">Pectoraux</option>
                                    <option value="Dos">Dos</option>
                                    <option value="Épaules">Épaules</option>
                                    <option value="Biceps">Biceps</option>
                                    <option value="Triceps">Triceps</option>
                                    <option value="Jambes">Jambes</option>
                                    <option value="Abdominaux">Abdominaux</option>
                                    <option value="Autre">Autre</option>
                                </select>
                            </div>

                            <div class="mb-2">
                                <label class="text-white mb-1" style="display: block;">Nom de l'exercice</label>
                                <input type="text" class="input" id="rm-exercise" placeholder="Ex: Développé couché" required>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3 mb-2">
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Charge soulevée (kg)</label>
                                    <input type="number" class="input" id="rm-weight" step="0.5" required>
                                </div>
                                <div>
                                    <label class="text-white mb-1" style="display: block;">Nombre de répétitions</label>
                                    <input type="number" class="input" id="rm-reps" min="1" max="12" required>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-1" style="display: block;">Date du test</label>
                                <input type="date" class="input" id="rm-date" required>
                            </div>

                            <button type="submit" class="btn btn-primary">Calculer et enregistrer</button>
                        </form>

                        <div id="rm-result" class="hidden"></div>

                        ${Object.keys(groupedTests).length > 0 ? `
                            <div class="mt-4">
                                <h3 class="text-cyan mb-3" style="font-size: 1.3rem;">📊 Historique des tests par groupe musculaire</h3>
                                ${Object.entries(groupedTests).map(([muscle, tests]) => `
                                    <div class="mb-4">
                                        <h4 class="text-white mb-2" style="font-size: 1.1rem; padding: 0.75rem; background: rgba(6, 182, 212, 0.2); border-radius: 0.5rem; border-left: 4px solid #06b6d4;">
                                            💪 ${muscle}
                                        </h4>
                                        ${tests.reverse().map(test => `
                                            <div class="rm-history-card">
                                                <div class="flex justify-between items-center">
                                                    <div style="flex: 1;">
                                                        <h4 class="text-cyan" style="font-size: 1.1rem; margin-bottom: 0.5rem;">${test.exercise}</h4>
                                                        <p class="text-white" style="opacity: 0.7; font-size: 0.9rem;">📅 ${test.date}</p>
                                                        <div class="text-white mt-2" style="opacity: 0.7; font-size: 0.9rem;">
                                                            Basé sur ${test.weight}kg × ${test.reps} répétition${test.reps > 1 ? 's' : ''}
                                                        </div>
                                                    </div>
                                                    <div class="text-center" style="margin: 0 1rem;">
                                                        <div style="color: #10b981; font-size: 1.8rem; font-weight: bold;">${test.rm} kg</div>
                                                        <div class="text-white" style="opacity: 0.7; font-size: 0.85rem;">1RM estimé</div>
                                                    </div>
                                                    <div class="flex flex-col gap-2">
                                                        <button class="btn btn-secondary" style="padding: 0.5rem 0.75rem; font-size: 0.85rem;" onclick="app.editRM(${test.originalIndex})">✏️ Modifier</button>
                                                        <button class="btn btn-danger" style="padding: 0.5rem 0.75rem; font-size: 0.85rem;" onclick="app.deleteRM(${test.originalIndex})">🗑️ Supprimer</button>
                                                    </div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}

                        <div class="tip-box">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">ℹ️ Comment utiliser ce calculateur ?</div>
                            <ul style="list-style: none; padding: 0;">
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">• Sélectionnez le groupe musculaire concerné</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">• Entrez une charge que vous pouvez soulever entre 1 et 12 fois</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">• Le calculateur estimera votre 1RM (charge maximale)</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.25rem 0;">• Plus précis entre 3-8 répétitions</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            renderSessionsTab() {
                return `
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-white" style="font-size: 1.5rem;">Mes Séances d'entraînement</h2>
                            <button class="btn btn-primary" onclick="app.createNewSession()">➕ Nouvelle séance</button>
                        </div>

                        ${this.sessions.length === 0 ? `
                            <div class="text-center" style="padding: 3rem 1rem;">
                                <div style="font-size: 4rem; margin-bottom: 1rem;">📝</div>
                                <p class="text-white" style="font-size: 1.2rem; margin-bottom: 0.5rem;">Aucune séance créée</p>
                                <p class="text-white" style="opacity: 0.7;">Commencez par créer votre première séance d'entraînement</p>
                            </div>
                        ` : `
                            <div>
                                ${this.sessions.map((session, index) => `
                                    <div class="session-card">
                                        <div class="flex justify-between items-center mb-2">
                                            <div style="flex: 1; cursor: pointer;" onclick="app.viewSession(${index})">
                                                <h3 class="text-white" style="font-size: 1.2rem;">${session.nom}</h3>
                                            </div>
                                            <div class="flex gap-2 items-center">
                                                <span class="badge badge-${session.type.toLowerCase()}">${session.type}</span>
                                                <button class="btn btn-secondary" style="padding: 0.5rem 0.75rem; font-size: 0.85rem;" onclick="app.editSession(${index})">✏️</button>
                                                <button class="btn btn-danger" style="padding: 0.5rem 0.75rem; font-size: 0.85rem;" onclick="app.deleteSession(${index})">🗑️</button>
                                            </div>
                                        </div>
                                        <div style="cursor: pointer;" onclick="app.viewSession(${index})">
                                            <div class="flex gap-2 mb-2" style="flex-wrap: wrap;">
                                                ${session.muscles.map(m => `<span class="badge" style="background: rgba(6, 182, 212, 0.3); color: #67e8f9;">${m}</span>`).join('')}
                                            </div>
                                            <p class="text-white" style="opacity: 0.7; font-size: 0.9rem;">${session.exercices.length} exercice(s)</p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </div>
                `;
            }

            renderCoursTab() {
                return `
                    <div>
                        <h2 class="text-white mb-4" style="font-size: 1.5rem;">📚 Cours & Ressources Pédagogiques</h2>
                        
                        <div class="flex gap-2 mb-4" style="overflow-x: auto; padding-bottom: 0.5rem;">
                            <button class="sub-tab-btn ${this.currentCoursTab === 'principes' ? 'active' : ''}" onclick="app.switchCoursTab('principes')">💡 Principes</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'mobiles' ? 'active' : ''}" onclick="app.switchCoursTab('mobiles')">🎯 3 Mobiles</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'hygiene' ? 'active' : ''}" onclick="app.switchCoursTab('hygiene')">🧘 Hygiène de vie</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'anatomie' ? 'active' : ''}" onclick="app.switchCoursTab('anatomie')">🧬 Planches Anatomiques</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'pectoraux' ? 'active' : ''}" onclick="app.switchCoursTab('pectoraux')">💪 Pectoraux</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'dos' ? 'active' : ''}" onclick="app.switchCoursTab('dos')">🔺 Dos</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'epaules' ? 'active' : ''}" onclick="app.switchCoursTab('epaules')">🏔️ Épaules</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'bras' ? 'active' : ''}" onclick="app.switchCoursTab('bras')">💪 Bras</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'jambes' ? 'active' : ''}" onclick="app.switchCoursTab('jambes')">🦵 Jambes</button>
                            <button class="sub-tab-btn ${this.currentCoursTab === 'abdos' ? 'active' : ''}" onclick="app.switchCoursTab('abdos')">🔥 Abdominaux</button>
                        </div>

                        ${this.renderCoursContent()}
                    </div>
                `;
            }

            renderCoursContent() {
                if (this.currentCoursTab === 'principes') {
                    return `
                        <div class="content-section">
                            <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">Les Principes Fondamentaux de la Musculation</h3>
                            
                            ${coursData.principes.map(principe => `
                                <div class="exercise-card">
                                    <h4>${principe.titre}</h4>
                                    <p class="text-white" style="opacity: 0.9; margin-bottom: 1rem; line-height: 1.6;">${principe.contenu}</p>
                                    <div class="tip-box" style="margin-top: 1rem;">
                                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">✨ Conseils pratiques :</div>
                                        <ul>
                                            ${principe.conseils.map(conseil => `<li>${conseil}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else if (this.currentCoursTab === 'mobiles') {
                    return this.renderMobilesSection();
                } else if (this.currentCoursTab === 'hygiene') {
                    return this.renderHygieneSection();
                } else if (this.currentCoursTab === 'anatomie') {
                    return this.renderAnatomieSection();
                } else if (this.currentCoursTab === 'pectoraux') {
                    return this.renderExercicesSection(coursData.exercicesPectoraux, 'Pectoraux');
                } else if (this.currentCoursTab === 'dos') {
                    return this.renderExercicesSection(coursData.exercicesDos, 'Dos');
                } else if (this.currentCoursTab === 'epaules') {
                    return this.renderExercicesSection(coursData.exercicesEpaules, 'Épaules');
                } else if (this.currentCoursTab === 'bras') {
                    return this.renderExercicesSection(coursData.exercicesBras, 'Bras');
                } else if (this.currentCoursTab === 'jambes') {
                    return this.renderExercicesSection(coursData.exercicesJambes, 'Jambes');
                } else if (this.currentCoursTab === 'abdos') {
                    return this.renderExercicesSection(coursData.exercicesAbdos, 'Abdominaux');
                }
            }

            renderMobilesSection() {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">🎯 Les 3 Mobiles en Musculation (CA5 - ALF/AFLP)</h3>
                        
                        <p class="text-white mb-4" style="opacity: 0.9; line-height: 1.6;">
                            En musculation, on distingue 3 mobiles principaux correspondant à 3 objectifs différents. 
                            Chaque mobile nécessite des paramètres d'entraînement spécifiques (charge, répétitions, séries, repos).
                        </p>

                        <h4 class="text-cyan mb-3" style="font-size: 1.1rem;">📋 Tableau des 3 Mobiles</h4>
                        <table class="mobile-table">
                            <thead>
                                <tr>
                                    <th>MOBILE</th>
                                    <th>OBJECTIF</th>
                                    <th>CHARGE (% CM)</th>
                                    <th>RÉPÉTITIONS</th>
                                    <th>SÉRIES</th>
                                    <th>REPOS</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${coursData.mobiles.map(mobile => `
                                    <tr>
                                        <td style="font-weight: 600; color: ${mobile.color};">${mobile.nom}</td>
                                        <td>${mobile.objectif}</td>
                                        <td>${mobile.charge}</td>
                                        <td>${mobile.repetitions}</td>
                                        <td>${mobile.series}</td>
                                        <td>${mobile.repos}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <h4 class="text-cyan mb-3 mt-4" style="font-size: 1.1rem;">⚡ Types de Contraction Musculaire</h4>
                        <table class="mobile-table">
                            <thead>
                                <tr>
                                    <th>TYPE</th>
                                    <th>DÉFINITION</th>
                                    <th>EXEMPLE</th>
                                    <th>MOBILE ASSOCIÉ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${coursData.typesContraction.map(contraction => `
                                    <tr>
                                        <td style="font-weight: 600; color: #67e8f9;">${contraction.type}</td>
                                        <td>${contraction.definition}</td>
                                        <td>${contraction.exemple}</td>
                                        <td>${contraction.mobile}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <h4 class="text-cyan mb-3 mt-4" style="font-size: 1.1rem;">🏋️ Formes d'Entraînement par Mobile</h4>
                        ${coursData.mobiles.map(mobile => `
                            <div class="exercise-card">
                                <h4 style="color: ${mobile.color};">${mobile.nom}</h4>
                                <ul>
                                    ${mobile.formes.map(forme => `<li>${forme}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}

                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">💡 Comment choisir son mobile ?</div>
                            <ul style="list-style: none; padding: 0;">
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• <strong>FORCE</strong> : Pour devenir plus fort, soulever plus lourd (athlétisme, powerlifting)</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• <strong>ÉQUILIBRE/VOLUME</strong> : Pour développer la masse musculaire (bodybuilding)</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• <strong>ENDURANCE</strong> : Pour tenir plus longtemps, améliorer la résistance musculaire (sports d'endurance)</li>
                            </ul>
                        </div>

                        <div class="warning-box" style="margin-top: 1rem;">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">⚠️ CM = Charge Maximale (1RM)</div>
                            <p class="text-white" style="opacity: 0.9;">
                                La CM représente la charge maximale que vous pouvez soulever une seule fois sur un exercice donné. 
                                Utilisez le calculateur 1RM pour estimer votre CM avant de définir vos charges d'entraînement.
                            </p>
                        </div>
                    </div>
                `;
            }

            renderHygieneSection() {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">🧘 Hygiène de Vie en Musculation</h3>
                        
                        <h4 class="text-cyan mb-3" style="font-size: 1.1rem;">✅ AVANT la séance</h4>
                        ${coursData.hygiene.avant.map(item => `
                            <div class="exercise-card">
                                <h4>${item.titre}</h4>
                                <p class="text-white" style="opacity: 0.9; line-height: 1.6;">${item.contenu}</p>
                            </div>
                        `).join('')}

                        <h4 class="text-cyan mb-3 mt-4" style="font-size: 1.1rem;">💪 PENDANT la séance</h4>
                        ${coursData.hygiene.pendant.map(item => `
                            <div class="exercise-card">
                                <h4>${item.titre}</h4>
                                <p class="text-white" style="opacity: 0.9; line-height: 1.6;">${item.contenu}</p>
                            </div>
                        `).join('')}

                        <h4 class="text-cyan mb-3 mt-4" style="font-size: 1.1rem;">🔄 APRÈS la séance</h4>
                        ${coursData.hygiene.apres.map(item => `
                            <div class="exercise-card">
                                <h4>${item.titre}</h4>
                                <p class="text-white" style="opacity: 0.9; line-height: 1.6;">${item.contenu}</p>
                            </div>
                        `).join('')}

                        <div class="tip-box" style="margin-top: 2rem;">
                            <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">⭐ L'essentiel à retenir</div>
                            <ul style="list-style: none; padding: 0;">
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• L'hydratation est cruciale : buvez AVANT, PENDANT et APRÈS</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• Échauffement et étirements ne sont PAS optionnels</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• La récupération (repos + nutrition) est aussi importante que l'entraînement</li>
                                <li class="text-white" style="opacity: 0.9; padding: 0.3rem 0;">• Le sommeil est votre meilleur allié pour progresser</li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            renderAnatomieSection() {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">🧬 Planches Anatomiques</h3>
                        
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="anatomy-image-container">
                                <img src="https://github.com/BastianMAS/livret-musculation-cap/blob/main/images/planche%20anatomique%20dos.PNG?raw=true" alt="Planche anatomique dos">
                                <p class="text-white" style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Vue de dos</p>
                            </div>
                            
                            <div class="anatomy-image-container">
                                <img src="https://github.com/BastianMAS/livret-musculation-cap/blob/main/images/planche%20anatomique%20face.PNG?raw=true" alt="Planche anatomique face">
                                <p class="text-white" style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">Vue de face</p>
                            </div>
                        </div>

                        <h3 class="text-cyan mb-3" style="font-size: 1.2rem; margin-top: 2rem;">📖 Anatomie Musculaire Détaillée</h3>
                        
                        ${this.musclesList.map(muscle => {
                            const info = coursData.anatomie[muscle];
                            return `
                                <div class="muscle-info-card">
                                    <h4>💪 ${muscle}</h4>
                                    
                                    <div class="muscle-info-section">
                                        <h5>🎯 Rôle et fonction</h5>
                                        <p>${info.role}</p>
                                    </div>
                                    
                                    <div class="muscle-info-section">
                                        <h5>🔗 Insertions anatomiques</h5>
                                        <ul>
                                            ${info.insertions.map(insertion => `<li>${insertion}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }

            renderExercicesSection(exercices, titre) {
                return `
                    <div class="content-section">
                        <h3 class="text-cyan mb-4" style="font-size: 1.3rem;">Exercices pour les ${titre}</h3>
                        
                        ${exercices.map(ex => `
                            <div class="exercise-card">
                                <h4>${ex.nom}</h4>
                                <p class="text-white" style="opacity: 0.9; margin-bottom: 1rem; font-style: italic;">${ex.description}</p>
                                
                                ${ex.videos && ex.videos.length > 0 ? `
                                    <div style="margin-bottom: 1.5rem;">
                                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.75rem; color: #06b6d4;">🎥 Vidéos de démonstration :</div>
                                        ${ex.videos.map(video => {
                                            const videoId = this.extractYouTubeID(video.url);
                                            return `
                                                <div style="margin-bottom: 1rem;">
                                                    <p class="text-white" style="opacity: 0.8; font-size: 0.9rem; margin-bottom: 0.5rem;">${video.titre}</p>
                                                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 0.75rem;">
                                                        <iframe 
                                                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" 
                                                            src="https://www.youtube.com/embed/${videoId}" 
                                                            frameborder="0" 
                                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                                            allowfullscreen>
                                                        </iframe>
                                                    </div>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                ` : ''}
                                
                                <div style="margin-bottom: 1rem;">
                                    <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem; color: #10b981;">🎯 Technique d'exécution :</div>
                                    <ul>
                                        ${ex.technique.map(step => `<li>${step}</li>`).join('')}
                                    </ul>
                                </div>
                                
                                ${ex.variantes ? `
                                    <div class="tip-box">
                                        <div class="text-white" style="font-weight: 600; margin-bottom: 0.5rem;">🔄 Variantes :</div>
                                        <p class="text-white" style="opacity: 0.9;">${ex.variantes.join(' • ')}</p>
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            extractYouTubeID(url) {
                const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/;
                const match = url.match(regExp);
                return (match && match[2].length === 11) ? match[2] : null;
            }

            switchCoursTab(tab) {
                this.currentCoursTab = tab;
                this.render();
            }renderSessionForm() {
                return `
                    <div class="container">
                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <h1 class="text-white" style="font-size: 2rem;">${this.currentSession !== null ? '✏️ Modifier la séance' : '➕ Nouvelle Séance'}</h1>
                                <button class="btn btn-secondary" onclick="app.cancelSession()">← Retour</button>
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-1" style="display: block;">Nom de la séance</label>
                                <input type="text" class="input" id="session-name" placeholder="Ex: Pectoraux + Triceps">
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-1" style="display: block;">Type de séance</label>
                                <select class="input" id="session-type">
                                    <option value="Force">Force</option>
                                    <option value="Endurance">Endurance</option>
                                    <option value="Équilibre">Équilibre</option>
                                </select>
                            </div>

                            <div class="mb-4">
                                <label class="text-white mb-2" style="display: block;">Muscles ciblés</label>
                                <div class="grid grid-cols-3 gap-2" id="muscles-list"></div>
                            </div>

                            <div class="mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-white" style="display: block;">Exercices</label>
                                    <button class="btn btn-primary" onclick="app.addExercice()">➕ Ajouter</button>
                                </div>
                                <div id="exercices-list"></div>
                            </div>

                            <div class="flex gap-2">
                                <button class="btn btn-success" onclick="app.saveSession()" style="flex: 1;">💾 Enregistrer</button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderSessionDetail() {
                const session = this.sessions[this.currentSession];
                return `
                    <div class="container">
                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <div>
                                    <h1 class="text-white mb-2" style="font-size: 2rem;">${session.nom}</h1>
                                    <span class="badge badge-${session.type.toLowerCase()}">${session.type}</span>
                                </div>
                                <button class="btn btn-secondary" onclick="app.backToSessions()">← Retour</button>
                            </div>

                            <div class="mb-4">
                                <h3 class="text-cyan mb-2">Muscles ciblés</h3>
                                <div class="flex gap-2" style="flex-wrap: wrap;">
                                    ${session.muscles.map(m => `<span class="badge" style="background: rgba(6, 182, 212, 0.3); color: #67e8f9;">${m}</span>`).join('')}
                                </div>
                            </div>

                            <div class="mb-4">
                                <h3 class="text-cyan mb-2">Exercices (${session.exercices.length})</h3>
                                ${session.exercices.map((ex, i) => `
                                    <div style="background: rgba(255, 255, 255, 0.1); border-radius: 0.75rem; padding: 1.25rem; margin-bottom: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2);">
                                        <div class="flex justify-between items-center mb-2">
                                            <h4 class="text-white" style="font-size: 1.1rem;">${i + 1}. ${ex.nom}</h4>
                                        </div>
                                        <div class="grid grid-cols-3 gap-3">
                                            <div>
                                                <div class="text-cyan" style="font-size: 0.85rem;">Séries</div>
                                                <div class="text-white" style="font-size: 1.2rem; font-weight: 600;">${ex.series}</div>
                                            </div>
                                            <div>
                                                <div class="text-cyan" style="font-size: 0.85rem;">Répétitions</div>
                                                <div class="text-white" style="font-size: 1.2rem; font-weight: 600;">${ex.repetitions}</div>
                                            </div>
                                            <div>
                                                <div class="text-cyan" style="font-size: 0.85rem;">Charge</div>
                                                <div class="text-white" style="font-size: 1.2rem; font-weight: 600;">${ex.charge}</div>
                                            </div>
                                        </div>
                                        ${ex.repos ? `<div class="text-white mt-2" style="opacity: 0.8; font-size: 0.9rem;">⏱️ Repos : ${ex.repos}</div>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            handleSelectUser() {
                const username = document.getElementById('select-user').value;
                if (!username) {
                    alert('Veuillez sélectionner un profil');
                    return;
                }

                this.currentUser = username;
                this.currentView = 'dashboard';
                this.loadSessions();
                this.loadRMHistory();
                this.loadUserAvatar();
                this.render();
            }

            handleSignup(e) {
                e.preventDefault();
                const username = document.getElementById('signup-username').value;
                const age = document.getElementById('signup-age').value;
                const sexe = document.getElementById('signup-sexe').value;
                const taille = document.getElementById('signup-taille').value;
                const poids = document.getElementById('signup-poids').value;

                const userKey = `user-${username}`;
                const userResult = storage.get(userKey, true);

                if (userResult.exists) {
                    alert('Ce prénom existe déjà, choisissez-en un autre');
                    return;
                }

                const userData = {
                    age: age,
                    sexe: sexe,
                    taille: taille,
                    poids: poids
                };

                storage.save(userKey, userData, true);

                if (this.userAvatar) {
                    this.currentUser = username;
                    this.saveUserAvatar();
                }

                alert('✅ Profil créé avec succès !');
                this.currentUser = username;
                this.currentView = 'dashboard';
                this.loadSessions();
                this.loadRMHistory();
                this.render();
            }

            updateProfile(e) {
                e.preventDefault();
                const age = document.getElementById('profile-age').value;
                const sexe = document.getElementById('profile-sexe').value;
                const taille = document.getElementById('profile-taille').value;
                const poids = document.getElementById('profile-poids').value;

                const userKey = `user-${this.currentUser}`;
                const userData = {
                    age: age,
                    sexe: sexe,
                    taille: taille,
                    poids: poids
                };

                storage.save(userKey, userData, true);
                alert('✅ Profil mis à jour avec succès !');
                this.render();
            }

            showLogin() {
                this.currentView = 'login';
                this.userAvatar = null;
                this.render();
            }

            showSignup() {
                this.currentView = 'signup';
                this.userAvatar = null;
                this.render();
            }

            logout() {
                this.currentUser = null;
                this.sessions = [];
                this.rmHistory = [];
                this.userAvatar = null;
                this.currentView = 'login';
                this.render();
            }

            switchTab(tab) {
                this.currentTab = tab;
                this.render();
            }

            calculateRM(e) {
                e.preventDefault();
                const muscle = document.getElementById('rm-muscle').value;
                const exercise = document.getElementById('rm-exercise').value;
                const weight = parseFloat(document.getElementById('rm-weight').value);
                const reps = parseInt(document.getElementById('rm-reps').value);
                const date = document.getElementById('rm-date').value;

                const rm = weight * (1 + reps / 30);
                
                this.rmHistory.push({
                    muscle: muscle,
                    exercise: exercise,
                    weight: weight,
                    reps: reps,
                    rm: parseFloat(rm.toFixed(1)),
                    date: date
                });
                this.saveRMHistory();

                const resultDiv = document.getElementById('rm-result');
                resultDiv.classList.remove('hidden');
                resultDiv.innerHTML = `
                    <div class="rm-result">
                        <div class="text-white" style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 0.5rem;">Votre 1RM estimé pour ${exercise}</div>
                        <div style="font-size: 3rem; font-weight: bold; color: #10b981; margin-bottom: 1rem;">${rm.toFixed(1)} kg</div>
                        <div class="text-white" style="opacity: 0.8;">Basé sur ${weight}kg × ${reps} répétition${reps > 1 ? 's' : ''}</div>
                        <div class="text-cyan mt-2" style="font-size: 0.9rem;">✅ Test enregistré dans ${muscle}</div>
                    </div>
                `;

                setTimeout(() => this.render(), 1500);
            }

            editRM(index) {
                const test = this.rmHistory[index];
                const muscle = prompt('Groupe musculaire :', test.muscle || 'Autre');
                const exercise = prompt('Nom de l\'exercice :', test.exercise);
                const weight = prompt('Charge (kg) :', test.weight);
                const reps = prompt('Répétitions :', test.reps);
                const date = prompt('Date (YYYY-MM-DD) :', test.date);

                if (muscle && exercise && weight && reps && date) {
                    const rm = parseFloat(weight) * (1 + parseInt(reps) / 30);
                    this.rmHistory[index] = {
                        muscle: muscle,
                        exercise: exercise,
                        weight: parseFloat(weight),
                        reps: parseInt(reps),
                        rm: parseFloat(rm.toFixed(1)),
                        date: date
                    };
                    this.saveRMHistory();
                    this.render();
                }
            }

            deleteRM(index) {
                if (confirm('Voulez-vous vraiment supprimer ce test de 1RM ?')) {
                    this.rmHistory.splice(index, 1);
                    this.saveRMHistory();
                    this.render();
                }
            }

            createNewSession() {
                this.currentSession = null;
                this.currentView = 'session-form';
                this.render();
                this.initSessionForm();
            }

            initSessionForm() {
                const musclesList = document.getElementById('muscles-list');
                musclesList.innerHTML = this.musclesList.map(muscle => `
                    <button type="button" class="muscle-btn" onclick="app.toggleMuscle(this, '${muscle}')">${muscle}</button>
                `).join('');

                this.exercicesTemp = [];
                this.musclesTemp = [];
                this.addExercice();
            }

            toggleMuscle(btn, muscle) {
                btn.classList.toggle('active');
                if (this.musclesTemp.includes(muscle)) {
                    this.musclesTemp = this.musclesTemp.filter(m => m !== muscle);
                } else {
                    this.musclesTemp.push(muscle);
                }
            }

            addExercice() {
                const exercicesList = document.getElementById('exercices-list');
                const index = this.exercicesTemp.length;
                
                const exerciceHTML = `
                    <div class="exercise-card mb-2" id="exercice-${index}">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="text-cyan">Exercice ${index + 1}</h4>
                            <button class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="app.removeExercice(${index})">🗑️</button>
                        </div>
                        
                        <div class="mb-2">
                            <input type="text" class="input" placeholder="Nom de l'exercice" id="ex-name-${index}">
                        </div>
                        
                        <div class="grid grid-cols-3 gap-2 mb-2">
                            <div>
                                <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Séries</label>
                                <input type="number" class="input" placeholder="4" id="ex-series-${index}">
                            </div>
                            <div>
                                <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Répétitions</label>
                                <input type="text" class="input" placeholder="8-12" id="ex-reps-${index}">
                            </div>
                            <div>
                                <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Charge</label>
                                <input type="text" class="input" placeholder="20kg" id="ex-charge-${index}">
                            </div>
                        </div>
                        
                        <div>
                            <label class="text-white" style="font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Temps de repos</label>
                            <input type="text" class="input" placeholder="Ex: 90 secondes" id="ex-repos-${index}">
                        </div>
                    </div>
                `;
                
                exercicesList.insertAdjacentHTML('beforeend', exerciceHTML);
                this.exercicesTemp.push({});
            }

            removeExercice(index) {
                const exerciceElement = document.getElementById(`exercice-${index}`);
                if (exerciceElement) {
                    exerciceElement.remove();
                }
            }

            saveSession() {
                const name = document.getElementById('session-name').value;
                const type = document.getElementById('session-type').value;

                if (!name || name.trim() === '') {
                    alert('Veuillez donner un nom à la séance');
                    return;
                }

                if (this.musclesTemp.length === 0) {
                    alert('Veuillez sélectionner au moins un muscle');
                    return;
                }

                const exercices = [];
                for (let i = 0; i < this.exercicesTemp.length; i++) {
                    const exName = document.getElementById(`ex-name-${i}`);
                    const exSeries = document.getElementById(`ex-series-${i}`);
                    const exReps = document.getElementById(`ex-reps-${i}`);
                    const exCharge = document.getElementById(`ex-charge-${i}`);
                    const exRepos = document.getElementById(`ex-repos-${i}`);

                    if (exName && exName.value.trim() !== '') {
                        exercices.push({
                            nom: exName.value,
                            series: exSeries.value || '4',
                            repetitions: exReps.value || '8-12',
                            charge: exCharge.value || 'À définir',
                            repos: exRepos.value || '90 secondes'
                        });
                    }
                }

                if (exercices.length === 0) {
                    alert('Veuillez ajouter au moins un exercice');
                    return;
                }

                const session = {
                    nom: name,
                    type: type,
                    muscles: this.musclesTemp,
                    exercices: exercices
                };

                if (this.currentSession !== null) {
                    this.sessions[this.currentSession] = session;
                    alert('✅ Séance modifiée avec succès !');
                } else {
                    this.sessions.push(session);
                    alert('✅ Séance enregistrée avec succès !');
                }
                
                this.saveSessions();
                this.backToSessions();
            }

            editSession(index) {
                this.currentSession = index;
                this.currentView = 'session-form';
                this.render();
                
                const session = this.sessions[index];
                setTimeout(() => {
                    document.getElementById('session-name').value = session.nom;
                    document.getElementById('session-type').value = session.type;
                    
                    this.musclesTemp = [...session.muscles];
                    this.exercicesTemp = [...session.exercices];
                    
                    session.muscles.forEach(muscle => {
                        const btn = Array.from(document.querySelectorAll('.muscle-btn')).find(b => b.textContent === muscle);
                        if (btn) btn.classList.add('active');
                    });
                    
                    const exercicesList = document.getElementById('exercices-list');
                    exercicesList.innerHTML = '';
                    session.exercices.forEach((ex, i) => {
                        this.addExercice();
                        setTimeout(() => {
                            document.getElementById(`ex-name-${i}`).value = ex.nom;
                            document.getElementById(`ex-series-${i}`).value = ex.series;
                            document.getElementById(`ex-reps-${i}`).value = ex.repetitions;
                            document.getElementById(`ex-charge-${i}`).value = ex.charge;
                            document.getElementById(`ex-repos-${i}`).value = ex.repos;
                        }, 10);
                    });
                }, 10);
            }

            deleteSession(index) {
                if (confirm('Voulez-vous vraiment supprimer cette séance ?')) {
                    this.sessions.splice(index, 1);
                    this.saveSessions();
                    this.render();
                }
            }

            viewSession(index) {
                this.currentSession = index;
                this.currentView = 'session-detail';
                this.render();
            }

            cancelSession() {
                this.currentSession = null;
                this.currentView = 'dashboard';
                this.currentTab = 'sessions';
                this.render();
            }

            backToSessions() {
                this.currentSession = null;
                this.currentView = 'dashboard';
                this.currentTab = 'sessions';
                this.render();
            }

            exportData() {
                const userKey = `user-${this.currentUser}`;
                const data = {
                    username: this.currentUser,
                    userData: JSON.parse(storage.get(userKey, true).value),
                    avatar: this.userAvatar,
                    sessions: this.sessions,
                    rmHistory: this.rmHistory,
                    exportDate: new Date().toISOString()
                };

                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `livret-musculation-${this.currentUser}-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
                alert('✅ Données exportées avec succès !');
            }

            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const data = JSON.parse(event.target.result);
                            
                            const userKey = `user-${data.username}`;
                            storage.save(userKey, data.userData, true);
                            
                            this.currentUser = data.username;
                            this.userAvatar = data.avatar || null;
                            this.sessions = data.sessions || [];
                            this.rmHistory = data.rmHistory || [];
                            this.saveSessions();
                            this.saveRMHistory();
                            this.saveUserAvatar();
                            
                            alert('✅ Données importées avec succès !');
                            this.currentView = 'dashboard';
                            this.render();
                        } catch (error) {
                            alert('❌ Erreur : Fichier invalide.');
                        }
                    };
                    reader.readAsText(file);
                };
                
                input.click();
            }

            attachLoginEvents() {
                // Pas d'événements spéciaux pour login
            }

            attachSignupEvents() {
                const signupForm = document.getElementById('signup-form');
                const avatarInput = document.getElementById('avatar-input');
                
                if (avatarInput) {
                    avatarInput.addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = (event) => {
                                this.userAvatar = event.target.result;
                                const preview = document.getElementById('avatar-preview');
                                preview.innerHTML = `<img src="${this.userAvatar}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">`;
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                }
                
                if (signupForm) {
                    signupForm.addEventListener('submit', (e) => this.handleSignup(e));
                }
            }

            attachDashboardEvents() {
                const rmForm = document.getElementById('rm-form');
                if (rmForm) {
                    rmForm.addEventListener('submit', (e) => this.calculateRM(e));
                    
                    const dateInput = document.getElementById('rm-date');
                    if (dateInput) {
                        const today = new Date().toISOString().split('T')[0];
                        dateInput.value = today;
                    }
                }

                const profileForm = document.getElementById('profile-form');
                if (profileForm) {
                    profileForm.addEventListener('submit', (e) => this.updateProfile(e));
                    
                    const avatarInput = document.getElementById('profile-avatar-input');
                    if (avatarInput) {
                        avatarInput.addEventListener('change', (e) => {
                            const file = e.target.files[0];
                            if (file) {
                                const reader = new FileReader();
                                reader.onload = (event) => {
                                    this.userAvatar = event.target.result;
                                    this.saveUserAvatar();
                                    this.render();
                                };
                                reader.readAsDataURL(file);
                            }
                        });
                    }
                }
            }

            attachSessionFormEvents() {
                // Les événements sont gérés par onclick
            }
        }

        const app = new LivretApp();
    </script>
</body>
</html>